import{s as w,u as y,r as m,c as U,i as k,a as l,b as n,d as s,w as r,v as d,f as c,j as C,k as x,F as p,g as E,l as M,t as V}from"./index-BEeaWYMk.js";import{u as L,a as S}from"./axios-B5ofNWwh.js";const B={id:"signUpPage",class:"bg-yellow"},D={class:"conatiner signUpPage vhContainer"},I=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),N={class:"formControls",action:"index.html"},R=s("h2",{class:"formControls_txt"},"註冊帳號",-1),q=s("label",{class:"formControls_label",for:"email"},"Email",-1),F={key:0},P=s("label",{class:"formControls_label",for:"name"},"您的暱稱",-1),T={key:1},$=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1),j={key:2},O=["disabled"],z={class:"modal fade",id:"signUpErrorModal",tabindex:"-1","aria-labelledby":"signUpErrorModalLabel","aria-hidden":"true"},A={class:"modal-dialog"},G={class:"modal-content"},H=s("div",{class:"modal-header"},[s("h5",{class:"modal-title fw-bold",id:"signUpErrorModalLabel"},"Oops!"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),J={class:"modal-body"},K={class:"text-danger m-1"},Q=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1),Z={__name:"SignUpPage",setup(W){const _=L(),{baseUrl:g}=w(_),b=y(),e=m({email:"",nickname:"",password:""}),u=m(""),h=U(()=>{const{email:t,nickname:o,password:i}=e.value;return!t||!o||!i}),v=async()=>{try{const t=await S.post(`${g.value}/users/sign_up`,e.value);console.log(`註冊成功! UID: ${t.data.uid}`),alert("註冊成功! 將跳轉至登入頁面。"),b.push("/login")}catch(t){console.log(t),u.value=[t.response.data.message].flat(),new bootstrap.Modal(document.getElementById("signUpErrorModal")).show()}};return(t,o)=>{const i=k("RouterLink");return l(),n(p,null,[s("div",B,[s("div",D,[I,s("div",null,[s("form",N,[R,q,r(s("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":o[0]||(o[0]=a=>e.value.email=a)},null,512),[[d,e.value.email]]),e.value.email===""?(l(),n("span",F,"此欄位不可留空")):c("",!0),P,r(s("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱",required:"","onUpdate:modelValue":o[1]||(o[1]=a=>e.value.nickname=a)},null,512),[[d,e.value.nickname]]),e.value.nickname===""?(l(),n("span",T,"此欄位不可留空")):c("",!0),$,r(s("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":o[2]||(o[2]=a=>e.value.password=a)},null,512),[[d,e.value.password]]),e.value.password===""?(l(),n("span",j,"此欄位不可留空")):c("",!0),s("input",{class:"formControls_btnSubmit",type:"button",onClick:v,value:"註冊帳號",disabled:h.value},null,8,O),C(i,{to:"/login",class:"formControls_btnLink"},{default:x(()=>[M("登入")]),_:1})])])])]),s("div",z,[s("div",A,[s("div",G,[H,s("div",J,[s("ul",K,[(l(!0),n(p,null,E(u.value,(a,f)=>(l(),n("li",{class:"p-1",key:f},V(a),1))),128))])]),Q])])])],64)}}};export{Z as default};
