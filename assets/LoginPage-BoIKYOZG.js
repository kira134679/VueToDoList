import{s as w,u as y,r,c as k,i as C,a as l,b as n,d as o,w as d,v as c,f as u,j as x,k as E,F as m,g as L,l as M,t as V}from"./index-BEeaWYMk.js";import{u as B,a as U}from"./axios-B5ofNWwh.js";const N={id:"loginPage",class:"bg-yellow"},R={class:"conatiner loginPage vhContainer"},S=o("div",{class:"side"},[o("a",{href:"#"},[o("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),o("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),T={class:"formControls",action:"index.html"},D=o("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),F=o("label",{class:"formControls_label",for:"email"},"Email",-1),I={key:0},P=o("label",{class:"formControls_label",for:"pwd"},"密碼",-1),q={key:1},$=["disabled"],j={class:"modal fade",id:"loginErrorModal",tabindex:"-1","aria-labelledby":"loginErrorModalLabel","aria-hidden":"true"},O={class:"modal-dialog"},z={class:"modal-content"},A=o("div",{class:"modal-header"},[o("h5",{class:"modal-title fw-bold",id:"loginErrorModalLabel"},"Oops!"),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),G={class:"modal-body"},H={class:"text-danger m-1"},J=o("div",{class:"modal-footer"},[o("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1),X={__name:"LoginPage",setup(K){const _=B(),{baseUrl:p}=w(_),g=y(),s=r({email:"",password:""}),i=r(""),b=k(()=>{const{email:e,password:t}=s.value;return!e||!t}),h=async()=>{try{const e=await U.post(`${p.value}/users/sign_in`,s.value);console.log(e),document.cookie=`todoToken=${e.data.token};`,console.log("cookie saved."),g.push("/")}catch(e){console.log(e),i.value=[e.response.data.message].flat(),new bootstrap.Modal(document.getElementById("loginErrorModal")).show()}};return(e,t)=>{const v=C("RouterLink");return l(),n(m,null,[o("div",N,[o("div",R,[S,o("div",null,[o("form",T,[D,F,d(o("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":t[0]||(t[0]=a=>s.value.email=a)},null,512),[[c,s.value.email]]),s.value.email===""?(l(),n("span",I,"此欄位不可留空")):u("",!0),P,d(o("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":t[1]||(t[1]=a=>s.value.password=a)},null,512),[[c,s.value.password]]),s.value.password===""?(l(),n("span",q,"此欄位不可留空")):u("",!0),o("input",{class:"formControls_btnSubmit",type:"button",onClick:h,value:"登入",disabled:b.value},null,8,$),x(v,{to:"/signup",class:"formControls_btnLink"},{default:E(()=>[M("註冊帳號")]),_:1})])])])]),o("div",j,[o("div",O,[o("div",z,[A,o("div",G,[o("ul",H,[(l(!0),n(m,null,L(i.value,(a,f)=>(l(),n("li",{class:"p-1",key:f},V(a),1))),128))])]),J])])])],64)}}};export{X as default};
